language: minimal
cache: bundler
services: docker
env:
- DOCKER_COMPOSE_VERSION=1.23.2
before_install:
- docker -v && docker-compose -v
- sudo rm /usr/local/bin/docker-compose
- curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname
  -s`-`uname -m` > docker-compose
- chmod +x docker-compose
- sudo mv docker-compose /usr/local/bin
- curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl
- chmod +x ./kubectl
- sudo mv ./kubectl /usr/local/bin/kubectl
install:
- docker-compose -f docker/docker-compose-build.yaml build --parallel
deploy:
  provider: heroku
  api_key:
    secure: t66Vjv/AtBwT7b9XAtc1MBxVN17XoDNu6j5ia0fGvOq9N5ePy+2RTGKiijo2aILKL1PHY0RXMJJCimGiz21ND5J0YWQlapklVRQYQx7m2l9Ix/Wep5mWVxGHSgikyqPnPEyZZTLuriKavtlAxTRhHL8B25xHmre0dh974poqgZXQrebA5OjDtJyTt5qZTjFnyyfR66ADTQ2uIqJ/TwxsIYGsPD54eEn53xWqPBnxwhI0g6U9s2qFcYbZb7OhSxxVt8tp3owL2P+NHDI3FhsMMJ2r/hnquPqssp3rUYULwLryjx7rfZjMsRKzifmucrr/5o0rdvUagbp59p96Y9hiTm+wWVOG9NGigmbOaEdP5mA0BKOfqQCn44veA84TehonpdRch642vBE3sY1kr0RWOHXUB+XMysMdGsSgeqK/aaJrLusgNEeKZi9ozICDHGBEo676whO6ycYE8NbsiAjEv8yF5ocHQwfTTh2xJZVbNHvEPcfwHMl4F6YGMjKfx1j+goh3LyJjB6NZiMxhcBQ+uVYXytS7KGVHuEdCFjMqmOs3HMe+BhLDlTLjGmgO+jVoJJDDZpRIJnVFE4Z042XdxycH7MQ3vRXOYtKdrtbHvX/gbuG7U688giJJwwqZ6qkXKitU1ic3aRpTafza81AUFwtnlUABgDNpNgnH15QhMlU=
  app: udagram-udacity-project
  skip_cleanup: true